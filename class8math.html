<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>Class 8 Mathematics</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;800&display=swap" rel="stylesheet">
    
    <style>
        :root { 
            --bg: #f0f2f5; 
            --text: #1e293b; 
            --card-bg: #ffffff; 
            --primary: #3F72F4;
            --success: #22c55e;
            --error: #ef4444;
        }
        * { box-sizing: border-box; }
        body { 
            font-family: 'Poppins', sans-serif; 
            background: var(--bg); 
            color: var(--text); 
            margin: 0; 
            padding-bottom: 40px; 
            -webkit-tap-highlight-color: transparent;
        }

        /* HEADER */
        header {
            background: var(--card-bg);
            padding: 16px 20px;
            position: sticky;
            top: 0;
            z-index: 100;
            border-bottom: 1px solid #e2e8f0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.03);
        }

        h1 { margin: 0; font-size: 18px; font-weight: 800; color: var(--text); text-transform: uppercase; letter-spacing: 0.5px; }

        .logout-btn { color: #dc2626; font-size: 18px; padding: 8px 12px; background: #fee2e2; border-radius: 10px; cursor: pointer; border: none; transition: background 0.2s; }
        .logout-btn:active { background: #fca5a5; }

        main { max-width: 800px; margin: 0 auto; padding: 20px; }

        /* CHAPTER CARD */
        .chapter-card {
            background: var(--card-bg);
            border-radius: 16px;
            margin-bottom: 16px;
            border: 1px solid #e2e8f0;
            overflow: hidden;
            box-shadow: 0 4px 6px -1px rgba(0,0,0,0.05);
            transition: box-shadow 0.2s;
        }
        
        .chapter-header {
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            background: white;
        }
        .chapter-header:active { background-color: #f8fafc; }
        .chapter-title { font-weight: 700; font-size: 16px; color: var(--text); }
        .chapter-icon { color: var(--primary); font-size: 20px; margin-right: 12px; }
        .chevron { color: #64748b; transition: transform 0.3s; }
        .chapter-card.active .chevron { transform: rotate(180deg); }

        .chapter-body { display: none; background: #f8fafc; border-top: 1px solid #e2e8f0; }
        .chapter-card.active .chapter-body { display: block; }

        /* TOPIC STYLES */
        .topic-item { padding: 20px; border-bottom: 1px solid #e2e8f0; background: white; margin-bottom: 10px; }
        .topic-title { font-size: 15px; font-weight: 700; color: var(--primary); margin-bottom: 15px; display: flex; align-items: center; }
        .topic-title i { margin-right: 8px; }
        
        /* SUB-TOPIC STYLES */
        .sub-topic {
            margin-left: 10px;
            padding-left: 15px;
            border-left: 3px solid #e2e8f0;
            margin-bottom: 12px;
        }

        .sub-topic-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            padding: 8px 0;
        }

        .sub-title { font-size: 14px; font-weight: 600; color: var(--text); }
        .sub-chevron { font-size: 12px; color: #94a3b8; transition: transform 0.3s; }
        .sub-topic.active .sub-chevron { transform: rotate(180deg); }

        .sub-topic-body { display: none; padding-top: 10px; }
        .sub-topic.active .sub-topic-body { display: block; }

        .sub-desc { font-size: 13px; color: #64748b; line-height: 1.6; margin-bottom: 12px; font-weight: 500; }

        /* READING MATERIAL BLOCK */
        .reading-material {
            background: #f1f5f9;
            padding: 15px;
            border-radius: 12px;
            font-size: 13px;
            color: #334155;
            line-height: 1.6;
            margin-bottom: 12px;
            border-left: 4px solid var(--primary);
        }

        /* VIDEO BUTTON */
        .btn-video {
            width: 100%;
            padding: 12px;
            border-radius: 12px;
            font-size: 14px;
            font-weight: 600;
            text-align: center;
            cursor: pointer;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            background: #e0f2fe;
            color: #0284c7;
            transition: transform 0.1s;
        }
        .btn-video:active { transform: scale(0.98); }

        .media-content {
            display: none;
            margin-top: 12px;
            border-radius: 12px;
            overflow: hidden;
            background: #000;
            position: relative;
        }
        .media-content iframe {
            width: 100%;
            height: 250px; /* Video Size */
            border: none;
            display: block;
        }

        /* QUIZ STYLES */
        .quiz-wrapper { margin-top: 25px; padding-top: 15px; border-top: 2px dashed #e2e8f0; }
        .btn-quiz {
            width: 100%;
            padding: 14px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 12px;
            font-weight: 700;
            font-size: 14px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            box-shadow: 0 4px 10px rgba(63, 114, 244, 0.3);
        }
        .btn-quiz:active { transform: scale(0.98); }

        .quiz-interface { display: none; margin-top: 15px; background: #f8fafc; padding: 15px; border-radius: 12px; border: 1px solid #e2e8f0; }
        .q-card { margin-bottom: 20px; padding-bottom: 15px; border-bottom: 1px solid #e2e8f0; }
        .q-text { font-weight: 700; font-size: 14px; margin-bottom: 10px; display: block; }
        
        .opt-label {
            display: flex; align-items: center; padding: 12px;
            background: white; border-radius: 10px; margin-bottom: 8px;
            border: 1px solid #e2e8f0; font-size: 13px; cursor: pointer;
            transition: background 0.2s;
        }
        .opt-label:active { background: #f1f5f9; }
        .opt-label input { margin-right: 12px; accent-color: var(--primary); width: 16px; height: 16px; }
        
        .opt-label.correct { background: #dcfce7; border-color: var(--success); color: #15803d; font-weight: 600; }
        .opt-label.wrong { background: #fee2e2; border-color: var(--error); color: #b91c1c; font-weight: 600; }
        
        .quiz-score { 
            text-align: center; font-weight: 800; padding: 15px; 
            background: var(--text); color: white; border-radius: 12px; 
            margin-top: 10px; display: none; font-size: 16px;
        }
    </style>
</head>
<body>

    <header>
        <h1>Class 8 Mathematics</h1>
        <div class="logout-btn" onclick="handleLogout()"><i class="fas fa-power-off"></i></div>
    </header>

    <main id="syllabus-container"></main>

    <script>
        function handleLogout() {
            localStorage.removeItem('student_session');
            window.location.href = "index.html";
        }

        const syllabus = [
            {
                id: 1,
                title: "Rational Numbers",
                topics: [
                    {
                        title: "Properties of Rational Numbers",
                        subTopics: [
                            { 
                                name: "Closure & Commutativity", 
                                desc: "Understanding how rational numbers behave under addition and multiplication.",
                                // --- VIDEO LINK ONLY ---
                                videoUrl: "https://drive.google.com/file/d/1CKn52anZy1NlrmfzDINpeyF57oNTDHdu/view?usp=drive_link",
                                // --- READING MATERIAL PLACEHOLDER ---
                                readingContent: "<b>Closure Property:</b> Rational numbers are closed under addition, subtraction, and multiplication. For example, 1/2 + 1/3 = 5/6 (Rational).<br><br><b>Commutativity:</b> Addition and multiplication are commutative for rational numbers (a + b = b + a). Subtraction and division are NOT commutative."
                            },
                            { 
                                name: "Associativity & Distributivity", 
                                desc: "The role of zero, the role of 1, negative of a number, and reciprocal.",
                                videoUrl: "",
                                readingContent: "Add your reading notes here for Associativity..."
                            }
                        ],
                        quiz: [
                            { q: "Rational numbers are closed under subtraction.", options: ["True", "False"], ans: 0 },
                            { q: "Multiplicative identity for rational numbers is:", options: ["0", "1", "-1", "None"], ans: 1 },
                            { q: "Additive inverse of -7/19 is:", options: ["7/19", "-7/19", "19/7", "0"], ans: 0 },
                            { q: "Reciprocal of -5 is:", options: ["5", "1/5", "-1/5", "1"], ans: 2 },
                            { q: "a(b+c) = ab + ac is called:", options: ["Associative", "Commutative", "Distributive", "Closure"], ans: 2 },
                            { q: "The product of two rational numbers is always:", options: ["Integer", "Rational", "Irrational", "Whole"], ans: 1 },
                            { q: "Is division commutative for rational numbers?", options: ["Yes", "No", "Sometimes", "Unknown"], ans: 1 },
                            { q: "0 is the ________ identity.", options: ["Multiplicative", "Additive", "Subtractive", "Divisive"], ans: 1 },
                            { q: "Which number has no reciprocal?", options: ["1", "-1", "0", "2"], ans: 2 },
                            { q: "Standard form of 36/-24 is:", options: ["-3/2", "3/2", "-2/3", "2/3"], ans: 0 }
                        ]
                    }
                ]
            },
            {
                id: 2,
                title: "Linear Equations in One Variable",
                topics: [
                    {
                        title: "Solving Equations",
                        subTopics: [
                            { name: "Variable on one side", desc: "Methods to solve linear equations having the variable on only one side.", videoUrl: "", readingContent: "Content goes here..." },
                            { name: "Variable on both sides", desc: "Techniques for solving equations where variables appear on both LHS and RHS.", videoUrl: "", readingContent: "Content goes here..." }
                        ],
                        quiz: [
                            { q: "Solution of 2x - 3 = 7 is:", options: ["5", "2", "4", "3"], ans: 0 },
                            { q: "If 5t - 3 = 3t - 5, then t = ?", options: ["-1", "1", "0", "2"], ans: 0 },
                            { q: "The degree of a linear equation is:", options: ["0", "1", "2", "3"], ans: 1 },
                            { q: "A linear equation has how many solutions?", options: ["One", "Two", "Infinite", "None"], ans: 0 },
                            { q: "Solve: x/3 + 1 = 7/15", options: ["-8/5", "8/5", "2/5", "-2/5"], ans: 0 },
                            { q: "Three consecutive integers sum to 51. The middle one is:", options: ["16", "17", "18", "15"], ans: 1 },
                            { q: "Sum of two numbers is 95. One exceeds other by 15. The smaller number is:", options: ["40", "55", "35", "45"], ans: 0 },
                            { q: "Value of x in 4z + 3 = 6 + 2z", options: ["1.5", "2", "3", "0"], ans: 0 },
                            { q: "Solving means finding the value of the:", options: ["Constant", "Variable", "Equation", "Term"], ans: 1 },
                            { q: "Process of moving terms to other side is called:", options: ["Translation", "Transposition", "Transformation", "Transition"], ans: 1 }
                        ]
                    }
                ]
            },
            // ... (Insert remaining Chapters 3-13 from previous full list here) ...
            {
                id: 13,
                title: "Introduction to Graphs",
                topics: [
                    {
                        title: "Coordinates",
                        subTopics: [
                            { name: "Types of Graphs", desc: "Bar graph, Pie graph, Histogram, Line graph.", videoUrl: "", readingContent: "Content goes here..." },
                            { name: "Cartesian Plane", desc: "Plotting points (x, y), Axes, Origin.", videoUrl: "", readingContent: "Content goes here..." }
                        ],
                        quiz: [
                            { q: "Point (0,0) is called:", options: ["X-axis", "Y-axis", "Origin", "Quadrant"], ans: 2 },
                            { q: "In (3, 5), ordinate is:", options: ["3", "5", "0", "8"], ans: 1 },
                            { q: "Horizontal axis is:", options: ["X-axis", "Y-axis", "Z-axis", "None"], ans: 0 },
                            { q: "Point (2,0) lies on:", options: ["X-axis", "Y-axis", "Origin", "Quadrant I"], ans: 0 },
                            { q: "Graph showing change over time:", options: ["Bar", "Pie", "Line", "Histogram"], ans: 2 },
                            { q: "Abscissa of (4, -2):", options: ["4", "-2", "2", "0"], ans: 0 },
                            { q: "Point (0, 5) lies on:", options: ["X-axis", "Y-axis", "Origin", "None"], ans: 1 },
                            { q: "A line graph that is a straight line:", options: ["Linear Graph", "Bar Graph", "Pie Chart", "None"], ans: 0 },
                            { q: "How many quadrants are there?", options: ["2", "4", "6", "8"], ans: 1 },
                            { q: "Independent variable is on:", options: ["X-axis", "Y-axis", "Both", "None"], ans: 0 }
                        ]
                    }
                ]
            }
        ];

        // ADD MISSING CHAPTERS (3-12) logic same as before to ensure full functionality.
        // For production, ensure the full syllabus array is populated.

        const container = document.getElementById('syllabus-container');

        syllabus.forEach(chapter => {
            const card = document.createElement('div');
            card.className = 'chapter-card';
            const header = document.createElement('div');
            header.className = 'chapter-header';
            header.innerHTML = `<div style="display:flex; align-items:center;"><i class="fas fa-book chapter-icon"></i><span class="chapter-title">${chapter.id}. ${chapter.title}</span></div><i class="fas fa-chevron-down chevron"></i>`;
            
            const body = document.createElement('div');
            body.className = 'chapter-body';

            chapter.topics.forEach((topic, tIndex) => {
                const topicDiv = document.createElement('div');
                topicDiv.className = 'topic-item';
                let html = `<div class="topic-title"><i class="fas fa-layer-group"></i> ${topic.title}</div>`;

                topic.subTopics.forEach((sub, sIndex) => {
                    const mediaId = `media-${chapter.id}-${tIndex}-${sIndex}`;
                    html += `
                        <div class="sub-topic">
                            <div class="sub-topic-header" onclick="toggleSubTopic(this)">
                                <span class="sub-title">${sub.name}</span>
                                <i class="fas fa-chevron-down sub-chevron"></i>
                            </div>
                            <div class="sub-topic-body">
                                <div class="sub-desc">${sub.desc}</div>
                                
                                ${sub.readingContent ? `<div class="reading-material">${sub.readingContent}</div>` : ''}

                                ${sub.videoUrl ? `
                                <div class="media-actions">
                                    <button onclick="toggleMedia('${sub.videoUrl}', '${mediaId}')" class="btn-video">
                                        <i class="fas fa-play-circle"></i> Watch Video Lesson
                                    </button>
                                </div>
                                <div id="${mediaId}" class="media-content"></div>
                                ` : ''}
                            </div>
                        </div>
                    `;
                });

                const quizId = `quiz-${chapter.id}-${tIndex}`;
                html += `<div class="quiz-wrapper"><button class="btn-quiz" onclick="toggleQuiz('${quizId}')"><i class="fas fa-question-circle"></i> Take Quiz</button><div id="${quizId}" class="quiz-interface"></div></div>`;
                topicDiv.innerHTML = html;
                body.appendChild(topicDiv);
            });

            card.appendChild(header);
            card.appendChild(body);
            container.appendChild(card);
            header.addEventListener('click', () => card.classList.toggle('active'));
        });

        function toggleSubTopic(headerElement) {
            const subTopicDiv = headerElement.parentElement;
            subTopicDiv.classList.toggle('active');
        }

        function toggleMedia(url, elementId) {
            if (!url) return;
            const container = document.getElementById(elementId);
            if (container.style.display === "block") {
                container.style.display = "none";
                container.innerHTML = ""; 
                return;
            }

            let embedUrl = url;
            if (url.includes("drive.google.com") && url.includes("/view")) {
                embedUrl = url.replace(/\/view.*/, "/preview");
            }

            container.innerHTML = `<iframe src="${embedUrl}" allow="autoplay; fullscreen"></iframe>`;
            container.style.display = "block";
        }

        function toggleQuiz(quizId) {
            const quizDiv = document.getElementById(quizId);
            const ids = quizId.split('-'); 
            const chapterData = syllabus.find(c => c.id == ids[1]);
            const quizData = chapterData.topics[ids[2]].quiz;

            if (quizDiv.style.display === 'block') { quizDiv.style.display = 'none'; return; }
            
            if (quizDiv.innerHTML.trim() === '') {
                let qHtml = '';
                quizData.forEach((q, idx) => {
                    qHtml += `<div class="q-card" id="${quizId}-q${idx}"><span class="q-text">${idx+1}. ${q.q}</span><div class="options-list">${q.options.map((opt, oIdx) => `<label class="opt-label"><input type="radio" name="${quizId}-q${idx}" value="${oIdx}"> ${opt}</label>`).join('')}</div></div>`;
                });
                qHtml += `<button class="btn-quiz" onclick="submitQuiz('${quizId}')">Submit Answers</button><div id="${quizId}-score" class="quiz-score"></div>`;
                quizDiv.innerHTML = qHtml;
            }
            quizDiv.style.display = 'block';
        }

        function submitQuiz(quizId) {
            const ids = quizId.split('-');
            const quizQuestions = syllabus.find(c => c.id == ids[1]).topics[ids[2]].quiz;
            let score = 0;
            quizQuestions.forEach((q, idx) => {
                const qDiv = document.getElementById(`${quizId}-q${idx}`);
                const selected = qDiv.querySelector(`input[name="${quizId}-q${idx}"]:checked`);
                const labels = qDiv.querySelectorAll('.opt-label');
                labels.forEach(l => l.classList.remove('correct', 'wrong'));
                if (selected) {
                    if (parseInt(selected.value) === q.ans) { score++; selected.parentElement.classList.add('correct'); }
                    else { selected.parentElement.classList.add('wrong'); labels[q.ans].classList.add('correct'); }
                } else { labels[q.ans].classList.add('correct'); }
            });
            const sDiv = document.getElementById(`${quizId}-score`);
            sDiv.innerText = `You Scored: ${score} / ${quizQuestions.length}`;
            sDiv.style.display = 'block';
        }
    </script>
</body>
</html>
